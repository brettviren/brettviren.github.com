<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Brett Viren" />
        <meta name="copyright" content="Brett Viren" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="emacs, org, python, pelican, web, Meta, " />

<meta property="og:title" content="This site.  - Using of Emacs, Org and Pelican to make this site.. "/>
<meta property="og:url" content="http://brettviren.github.io/this" />
<meta property="og:description" content="This web site has evolved over time. It is currently written with Emacs org-mode. It&#39;s Org source is exported with OrgOnPy and Pelican. This topic contains notes on how this is done. 1 Generalities I use Emacs for producing pretty much all of my information &#34;output&#34;. Except for Email ..." />
<meta property="og:site_name" content="They Call Me Brett" />
<meta property="og:article:author" content="Brett Viren" />
<meta property="og:article:published_time" content="2014-03-02T00:00:00-05:00" />
<meta property="" content="2015-08-23T00:00:00-04:00" />
<meta name="twitter:title" content="This site.  - Using of Emacs, Org and Pelican to make this site.. ">
<meta name="twitter:description" content="This web site has evolved over time. It is currently written with Emacs org-mode. It&#39;s Org source is exported with OrgOnPy and Pelican. This topic contains notes on how this is done. 1 Generalities I use Emacs for producing pretty much all of my information &#34;output&#34;. Except for Email ...">

        <title>This site.  - Using of Emacs, Org and Pelican to make this site..  Â· They Call Me Brett
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://brettviren.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://brettviren.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://brettviren.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://brettviren.github.io/theme/css/custom.css" media="screen">
        <link href="http://brettviren.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="They Call Me Brett - Full Atom Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://brettviren.github.io/"><span class=site-name>They Call Me Brett</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://brettviren.github.io">Home</a></li>
                            <li ><a href="http://brettviren.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://brettviren.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://brettviren.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://brettviren.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://brettviren.github.io/this"> This site.  <small> Using of Emacs, Org and Pelican to make this site.. </small>  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc" id="">

<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. Generalities</a></li>
<li><a href="#orgheadline2">2. Emacs and Org</a></li>
<li><a href="#orgheadline3">3. OrgOnPy</a></li>
<li><a href="#orgheadline5">4. Pelican</a>
<ul>
<li><a href="#orgheadline4">4.1. Machinations</a></li>
</ul>
</li>
<li><a href="#orgheadline6">5. Links</a></li>
</ul>
</div>
</div></body></html><html><body><a href="index.org">Org source</a>
        </nav>
    </div>
    <div class="span8 article-content">

            
            
<p>
This web site has evolved over time.  It is currently written with
Emacs <a href="//orgmode.org">org-mode</a>.  It's Org source is exported with <a href="https://github.com/brettviren/orgonpy">OrgOnPy</a> and <a href="http://blog.getpelican.com/">Pelican</a>.
This topic contains notes on how this is done.
</p>
<div class="outline-2" id="outline-container-orgheadline1">
<h2 id="orgheadline1"><span class="section-number-2">1</span> Generalities</h2>
<div class="outline-text-2" id="text-1">
<p>
I use Emacs for producing pretty much all of my information "output".
Except for Email (and IRC), I use Org mode to manage pretty much all
my text-based (non-code) output.  The main content that this web site
exposes are "topics" which are formal(ish) notes (like this one) which
I produce to remind myself what I did and for the sake of anyone else
that may be interested.  I will sometimes revise topics after their
initial "publication".
</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgheadline2">
<h2 id="orgheadline2"><span class="section-number-2">2</span> Emacs and Org</h2>
<div class="outline-text-2" id="text-2">
<p>
My <a href="https://github.com/brettviren/dot-emacs">Emacs config</a> is online.  The <a href="https://github.com/brettviren/dot-emacs/blob/master/init-org.el">Org initialization</a> adds to the
<code>org-capture-templates</code> list so I can start a "<a href="http://orgmode.org/manual/Capture.html">capture</a>" of a topic
with <code>C-c c b</code> or revisit an existing topic with <code>C-c c B</code>.  
</p>
<p>
Because a topic may include multiple files, I have this start a
sub-directory for each topic under my topics storage area
(<code>~/org-pub/topics</code>).
</p>
<p>
Each new topic is created using a <a href="https://github.com/brettviren/org-pub/blob/master/templates/topic-start.template">template</a> which will cause Org to
prompt for various items used later including title, subtitle,
category, tags (note, not same as Org headline tags) as well as
automatically fill some things like the date stamp (interpreted as a
creation date).  It also sets a <code>SETUPFILE</code> which contains some
minimal, global Org setup.
</p>
<p>
During authoring I can get a preview of how things look by doing a
local export (eg, <code>C-c C-e l p</code> for PDF, <code>C-c C-e h h</code> for HTML).
This export is not what eventually turns into the web page.
</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgheadline3">
<h2 id="orgheadline3"><span class="section-number-2">3</span> OrgOnPy</h2>
<div class="outline-text-2" id="text-3">
<p>
Unfortunately, I have never been able to fully grok Elisp and Python
is my preferred scripting language.  So that I may process content in
Org in non-trivial ways I have developed <a href="https://github.com/brettviren/orgonpy">OrgOnPy</a>.  It works by running
some Elisp which I did manage to write with a lot of help from the Org
mailing list to get the Org document as an <code>org-element</code> tree.  It
then breaks some of the circular references that exist in that tree
before using Emacs's <code>json</code> module to convert it to JSON.  OrgOnPy
provides an <code>org-element</code>-like tree representation which can then be
used to provide Python objects which are somewhat reminiscent of their
Elisp counterparts.
</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgheadline5">
<h2 id="orgheadline5"><span class="section-number-2">4</span> Pelican</h2>
<div class="outline-text-2" id="text-4">
<p>
Pelican is a static site generator.  It is well designed with fairly
good layering and a plugin system.  HTML is generated from two paths:
the overall structure of the pages is determined by Jinja templates
driven by metadata while the "payload" content is directly converted
from the content source files.
</p>
<p>
It is the job of the "reader" layer to provide metadata and HTML
content.  The "reader" is an explicit layer in the Pelican design and
it comes with readers that support Markdown, rST and AsciiDoc.  One
may also provide the "reader" as a plugin which is what OrgOnPy does
to add support for source files in Org markup.  The <a href="https://github.com/brettviren/orgonpy/tree/master/pelican-plugin/orgonpy">OrgOnPy Pelican
reader</a> is heavily inspired by <a href="https://github.com/getpelican/pelican-plugins/tree/master/org_reader"><code>org_reader</code></a> which is part of the
Pelican plugin collection.  OrgOnPy also provides a <a href="https://github.com/brettviren/orgonpy/tree/master/pelican-plugin/extract_toc">modified version
of the <code>extract_toc</code></a> plugin also from the Pelican plugin collection.
</p>
<p>
Pelican has a number of "themes" which provide for HTML structure and
CSS styling.  For the most part a theme is defined at a layer boundary
so that most themes can be interchanged without changes to the source
content files.  I made a <a href="./pelican-themes.html">a survey of Pelican themes</a> ultimately
settling on <a href="https://github.com/talha131/pelican-elegant/">elegant</a> as being closest in structure and functionality to
what I wanted.  Inevitably I wanted to tweak so I have lightly <a href="https://github.com/brettviren/org-pub/tree/master/pelican/site/themes/elegant">forked elegant</a>.
</p>
</div>
<div class="outline-3" id="outline-container-orgheadline4">
<h3 id="orgheadline4"><span class="section-number-3">4.1</span> Machinations</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Create an environment for building the web site
</p>
<pre class="example">
$ virtualenv venv
$ source venv/bin/activate
$ pip install pelican beautifulsoup4
</pre>
<p>
Build the site
</p>
<pre class="example">
$ cd ~/org-pub/pelican/site
$ pelican
$ (cd output &amp;&amp; python -m pelican.server)
</pre>
<p>
Content is held in <code>site/content/</code> and exists as either immediate
files or relative symlinks to sub-directories of <code>topics/</code>.
</p>
<p>
That build locally.  Deployment is done with the help of the Fabric file and goes like:
</p>
<pre class="example">
$ pip install fabric
$
</pre>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgheadline6">
<h2 id="orgheadline6"><span class="section-number-2">5</span> Links</h2>
<div class="outline-text-2" id="text-5">
<p>
There are other ways to use Org to make web pages.  Here are some I've looked at.
</p>
<ul class="org-ul">
<li><a href="http://www.seas.upenn.edu/~heqin/academic/sitecreation.html">http://www.seas.upenn.edu/~heqin/academic/sitecreation.html</a></li>
<li><a href="http://doc.norang.ca/org-mode.html">http://doc.norang.ca/org-mode.html</a></li>
<li><a href="http://www.nicolas-petton.fr/blog/blogging-with-org-mode.html">http://www.nicolas-petton.fr/blog/blogging-with-org-mode.html</a></li>
<li><a href="http://stevenbagley.net/blog/blog-with-emacs-org-mode.html">http://stevenbagley.net/blog/blog-with-emacs-org-mode.html</a></li>
<li><a href="http://kerunix.com/blog-using-orgmode-and-pelican.html">http://kerunix.com/blog-using-orgmode-and-pelican.html</a></li>
<li><a href="http://steckerhalter.co.vu/posts/blogging-with-org-mode.html">http://steckerhalter.co.vu/posts/blogging-with-org-mode.html</a></li>
<li><a href="http://justinlilly.com/emacs/orgmode_static_site_generator.html">http://justinlilly.com/emacs/orgmode_static_site_generator.html</a></li>
</ul>
</div>
</div>

            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2014-03-02T00:00:00-05:00">Mar 2, 2014</time>

<h4>Last Updated</h4>
<time datetime="2015-08-23T00:00:00-04:00">Aug 23, 2015</time>

            <h4>Category</h4>
            <a class="category-link" href="http://brettviren.github.io/categories.html#meta-ref">Meta</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://brettviren.github.io/tags.html#emacs-ref">emacs
                    <span>1</span>
</a></li>
                <li><a href="http://brettviren.github.io/tags.html#org-ref">org
                    <span>2</span>
</a></li>
                <li><a href="http://brettviren.github.io/tags.html#pelican-ref">pelican
                    <span>1</span>
</a></li>
                <li><a href="http://brettviren.github.io/tags.html#python-ref">python
                    <span>1</span>
</a></li>
                <li><a href="http://brettviren.github.io/tags.html#web-ref">web
                    <span>1</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://github.com/brettviren" title="GitHub" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="mailto:brett.viren@gmail.com" title="Personal Email" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="mailto:bv@bnl.gov" title="Work Email" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Written using <a href="https://www.gnu.org/software/emacs/">Emacs</a> and <a href="http://orgmode.org/">Org</a>.  Generated with <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a> and <a href="https://github.com/brettviren/orgonpy">OrgOnPy</a>.  Styled using <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant theme</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a>.</li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>