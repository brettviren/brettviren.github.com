<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>They Call Me Brett</title><link href="http://brettviren.github.io/" rel="alternate"></link><link href="http://brettviren.github.io/feeds/security.atom.xml" rel="self"></link><id>http://brettviren.github.io/</id><updated>2015-08-23T00:00:00-04:00</updated><entry><title>Using PGP With GnuPG</title><link href="http://brettviren.github.io/gnupg" rel="alternate"></link><updated>2015-08-23T00:00:00-04:00</updated><author><name>Brett Viren</name></author><id>tag:brettviren.github.io,2015-07-07:gnupg</id><summary type="html">
&lt;p&gt;
In 2005 I made a &lt;a href="http://pgp.mit.edu/pks/lookup?op=vindex&amp;amp;search=0x122C47D99D1D282C"&gt;PGP Key&lt;/a&gt;.  This note documents various aspects of interacting with my key.
&lt;/p&gt;
&lt;div class="outline-2" id="outline-container-orgheadline1"&gt;
&lt;h2 id="orgheadline1"&gt;&lt;span class="section-number-2"&gt;1&lt;/span&gt; Keys&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;p&gt;
My new 2015 key.  See next section for how I upgraded.
&lt;/p&gt;
&lt;pre class="example"&gt;
pub   4096R/97A51B47 2015-07-08
      Key fingerprint = F37E 5F67 394D 3592 5D37  EE66 5B00 71E0 97A5 1B47
uid                  Brett Viren &amp;lt;bv@bnl.gov&amp;gt;
sub   4096R/3F58C5C6 2015-07-08
&lt;/pre&gt;
&lt;p&gt;
My initial 2005 key.
&lt;/p&gt;
&lt;pre class="example"&gt;
$ gpg --fingerprint --list-keys 9D1D282C
pub   1024D/9D1D282C 2005-12-20
      Key fingerprint = 04A6 309A D560 D339 D027  2924 122C 47D9 9D1D 282C
uid                  Brett Viren &amp;lt;bv@bnl.gov&amp;gt;
sub   2048g/C26A51C6 2005-12-20
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-2" id="outline-container-orgheadline2"&gt;
&lt;h2 id="orgheadline2"&gt;&lt;span class="section-number-2"&gt;2&lt;/span&gt; Key server&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-2"&gt;
&lt;p&gt;
I'm &lt;a href="https://help.riseup.net/en/security/message-security/openpgp/best-practices#selecting-a-keyserver-and-configuring-your-machine-to-refresh-your-keyring"&gt;told&lt;/a&gt; I should use an sks keyserver pool which is authenticated by a CA cert.
&lt;/p&gt;
&lt;pre class="example"&gt;
$ wget https://sks-keyservers.net/sks-keyservers.netCA.pem
$ openssl x509 -fingerprint -in sks-keyservers.netCA.pem|head -1
SHA1 Fingerprint=79:1B:27:A3:8E:66:7F:80:27:81:4D:4E:68:E7:C4:78:A4:5D:5A:17
&lt;/pre&gt;
&lt;p&gt;
&lt;code&gt;gpg.conf&lt;/code&gt;:
&lt;/p&gt;
&lt;pre class="example"&gt;
keyserver hkps://hkps.pool.sks-keyservers.net
keyserver-options ca-cert-file=~/.gnupg/CA/sks-keyservers.netCA.pem
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-2" id="outline-container-orgheadline8"&gt;
&lt;h2 id="orgheadline8"&gt;&lt;span class="section-number-2"&gt;3&lt;/span&gt; Upgrading&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-3"&gt;
&lt;p&gt;
The 2005 key is a 1024D.  I want a larger 4096R one.  
&lt;/p&gt;
&lt;/div&gt;
&lt;div class="outline-3" id="outline-container-orgheadline3"&gt;
&lt;h3 id="orgheadline3"&gt;&lt;span class="section-number-3"&gt;3.1&lt;/span&gt; Getting started&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3-1"&gt;
&lt;p&gt;
I mostly followed &lt;a href="http://ekaia.org/blog/2009/05/10/creating-new-gpgkey/"&gt;this post&lt;/a&gt; which seems to be what everyone follows.
It starts by recommending a few &lt;code&gt;gpg.conf&lt;/code&gt; settings.  However, it
looks like &lt;code&gt;SHA512&lt;/code&gt; is more common today that the &lt;code&gt;SHA256&lt;/code&gt; that this
2009 blog post recomends.
&lt;/p&gt;
&lt;pre class="example"&gt;
# default-key  9D1D282C
personal-digest-preferences SHA512
cert-digest-algo SHA512
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES CAST5 ZLIB BZIP2 ZIP Uncompressed
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-3" id="outline-container-orgheadline4"&gt;
&lt;h3 id="orgheadline4"&gt;&lt;span class="section-number-3"&gt;3.2&lt;/span&gt; Creating the new key&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3-2"&gt;
&lt;p&gt;
Thanks &lt;a href="http://keyring.debian.org/creating-key.html"&gt;Debian&lt;/a&gt;.
Create the key with &lt;code&gt;gpg --gen-key&lt;/code&gt; selecting option:
&lt;/p&gt;
&lt;pre class="example"&gt;
$ gpg --gen-key
...
   (1) RSA and RSA (default)
&lt;/pre&gt;
&lt;p&gt;
No comment as that's apparently considered "bad".  Meet the new me:
&lt;/p&gt;
&lt;pre class="example"&gt;
pub   4096R/97A51B47 2015-07-08
      Key fingerprint = F37E 5F67 394D 3592 5D37  EE66 5B00 71E0 97A5 1B47
uid                  Brett Viren &amp;lt;bv@bnl.gov&amp;gt;
sub   4096R/3F58C5C6 2015-07-08
&lt;/pre&gt;
&lt;p&gt;
Make it default in &lt;code&gt;gpg.conf&lt;/code&gt;
&lt;/p&gt;
&lt;pre class="example"&gt;
default-key  97A51B47
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-3" id="outline-container-orgheadline5"&gt;
&lt;h3 id="orgheadline5"&gt;&lt;span class="section-number-3"&gt;3.3&lt;/span&gt; Add my Gmail identity&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3-3"&gt;
&lt;p&gt;
I try to keep my work identity tied to my &lt;code&gt;bv@bnl.gov&lt;/code&gt; email address
and all the rest tied to my &lt;code&gt;brett.viren@gmail.com&lt;/code&gt; address.  I don't
currently have GPG well integrated with Gmail, even when sending via
GNUS, but I follow the guide and add this identity nonetheless.
&lt;/p&gt;
&lt;pre class="example"&gt;
$ gpg --edit-key 97A51B47

gpg&amp;gt; adduid
Real name: Brett Viren
Email address: brett.viren@gmail.com
Comment: 
You selected this USER-ID:
    "Brett Viren &amp;lt;brett.viren@gmail.com&amp;gt;"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o

You need a passphrase to unlock the secret key for
user: "Brett Viren &amp;lt;bv@bnl.gov&amp;gt;"
4096-bit RSA key, ID 97A51B47, created 2015-07-08


pub  4096R/97A51B47  created: 2015-07-08  expires: never       usage: SC  
                     trust: ultimate      validity: ultimate
sub  4096R/3F58C5C6  created: 2015-07-08  expires: never       usage: E   
[ultimate] (1)  Brett Viren &amp;lt;bv@bnl.gov&amp;gt;
[ unknown] (2). Brett Viren &amp;lt;brett.viren@gmail.com&amp;gt;

gpg&amp;gt; save
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-3" id="outline-container-orgheadline6"&gt;
&lt;h3 id="orgheadline6"&gt;&lt;span class="section-number-3"&gt;3.4&lt;/span&gt; Sign new with old&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3-4"&gt;
&lt;p&gt;
This is so that the new me recognizes the old me.
&lt;/p&gt;
&lt;pre class="example"&gt;
$ gpg --default-key 9D1D282C --sign-key 97A51B47
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-3" id="outline-container-orgheadline7"&gt;
&lt;h3 id="orgheadline7"&gt;&lt;span class="section-number-3"&gt;3.5&lt;/span&gt; Transition statement&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3-5"&gt;
&lt;p&gt;
It is recommended to write a transition statement and sign it with both keys.
The key components of such a statement are apparently:
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;Affirm the transition is desired.&lt;/li&gt;
&lt;li&gt;List the key ID, date and fingerprint for the old and the new keys.&lt;/li&gt;
&lt;li&gt;State what you request others do with this transition information.&lt;/li&gt;
&lt;li&gt;For convenience of others, provide instructions on how to carry out
the request.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
My statements:
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a href="./transition-2005-to-2015.txt"&gt;./transition-2005-to-2015.txt&lt;/a&gt;, &lt;a href="./transition-2005-to-2015.old.txt"&gt;signed by old key&lt;/a&gt;, &lt;a href="./transition-2005-to-2015.new.txt"&gt;signed by new key&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="outline-2" id="outline-container-orgheadline9"&gt;
&lt;h2 id="orgheadline9"&gt;&lt;span class="section-number-2"&gt;4&lt;/span&gt; Subkeys&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-4"&gt;
&lt;p&gt;
It seems that when the world wants to know about subkeys the world turns to the &lt;a href="https://wiki.debian.org/Subkeys"&gt;Debian subkey wiki page&lt;/a&gt;.  Here is a more &lt;a href="https://alexcabal.com/creating-the-perfect-gpg-keypair/"&gt;coloquial coverage&lt;/a&gt; of the issue with some background.  Lots of good walk throughs at &lt;a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto"&gt;this ubuntu wiki page&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://www.void.gr/kargig/blog/2013/12/02/creating-a-new-gpg-key-with-subkeys/"&gt;This here post&lt;/a&gt; gives the run down on the key types that &lt;code&gt;gpg -[kK]&lt;/code&gt; shows
&lt;/p&gt;
&lt;dl class="org-dl"&gt;
&lt;dt&gt;&lt;code&gt;sec&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;SECret key&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;ssb&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;Secret SuBkey&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;pub&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;PUBlic key&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;sub&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;public SUBkey&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;
Using &lt;code&gt;gpg --edit-key&lt;/code&gt; prints a usage code
&lt;/p&gt;
&lt;dl class="org-dl"&gt;
&lt;dt&gt;&lt;code&gt;S&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;signing&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;C&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;certifying other signatures&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;E&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;encrypting&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;A&lt;/code&gt;&lt;/dt&gt;&lt;dd&gt;authentication&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;
I'm going to start using &lt;a href="../pass"&gt;pass&lt;/a&gt; and I (think I) want to use a dedicated encrypting subkey.
&lt;/p&gt;
&lt;pre class="example"&gt;
$ gpg --edit-key 0x5B0071E097A51B47
gpg&amp;gt; addkey
   ...
   (6) RSA (encrypt only)
Your selection? 6
What keysize do you want? (2048) 4096
Please specify how long the key should be valid.
         0 = key does not expire
...
Key is valid for? (0) 0
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="crypto"></category><category term="gpg"></category><category term="notes"></category><category term="cmdline"></category></entry></feed>