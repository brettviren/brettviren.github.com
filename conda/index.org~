#+TITLE: Using Conda To Package Stuff
#+DATE: [2014-11-21 Fri 19:28]
#+DESCRIPTION: Oh dear, worch may just have been obsoleted.
#+SETUPFILE: ~/org-pub/topics/setup.org

* Overview

I was looking through SciPy 2014 talks and found a talk on something called "Conda".  This takes pip to the level of handling builds.  It uses the same idea of "shims" scripts that I gave to Fermilab plus a worch like engine to do installation+build.  The install layout is single-rooted and uses Nix-like behavior using hardlinking instead of soft to produce derived distributions.  The packages are relocatable, not just in the trivial surface manner as UPS packages but goes into executables and scripts to make sure build paths are made relocatable.

It has a huge body of build recipes which includes GCC, BOOST and ROOT (no Geant4).

In short, worch may be dead, UPS may be dead, mrb may be dead.  Long live Conda.

Well, let's see.

* Links

 - [[https://conference.scipy.org/scipy2014/schedule/presentation/1708/][Sci Py 2014 Conda Abstract]]
 - [[http://pyvideo.org/video/2735/conda-a-cross-platform-package-manager-for-any-b][pyvideo entry]] with link to the presentation video at YouTube
 - [[http://conda.pydata.org/][Conda home page]]
 - [[http://conda.pydata.org/docs/intro.html][Conda docs]]
 - [[http://www.continuum.io/blog/conda][Blog entry]] with some description, Continuum support Conda devel
 - [[https://binstar.org][Binstar]] is like github+pypi
 - [[http://docs.binstar.org/][Binstar docs]]
 - [[https://binstar.org/brettviren][My binstar account]]

* Install =conda=

The package management is through a single =conda= program.  

It looks like I can use pip to get it, but it needs =libyaml-dev=:

#+BEGIN_EXAMPLE
  $ sudo apt-get install libyaml-dev
  $ pip install --user conda
#+END_EXAMPLE

But there is also [[http://conda.pydata.org/miniconda.html][miniconda]] to try:

#+BEGIN_EXAMPLE
  $ sudo apt-get remove --purge libyaml-dev 
  $ wget http://repo.continuum.io/miniconda/Miniconda3-3.7.3-Linux-x86_64.sh
  $ bash Miniconda3-3.7.3-Linux-x86_64.sh
  (pick install location)
  $ export PATH=/home/bv/opt/miniconda3/bin:$PATH
  $ conda install conda-build
#+END_EXAMPLE

This installs Python 3.4 and other stuff.

* Try to install ROOT

Let's see if we can get ROOT installed via =conda= without trying too hard

#+BEGIN_EXAMPLE
  $ conda search root
  Fetching package metadata: ..
#+END_EXAMPLE

Hmm, nothing....  It probably needs to be pointed at the collection of recipes on GitHub.

#+BEGIN_EXAMPLE
  $ git clone https://github.com/conda/conda-recipes.git
  $ conda build conda-recipes/root
#+END_EXAMPLE





